/** @jsx React.DOM */

var data = JSON.parse('{"0": {"0": {"h": 1, "v": 11}, "1": {"v": 13}, "2": {"h": 1, "v": 24}, "3": {"h": 3, "v": 62}, "4": {"h": 20, "v": 198}, "5": {"h": 99, "t": 1, "v": 540}, "6": {"h": 303, "t": 1, "v": 1345}, "7": {"h": 1153, "t": 1, "v": 2651}, "8": {"h": 3088, "t": 10, "v": 5056}, "9": {"h": 8242, "t": 11, "v": 8792}, "10": {"h": 47290, "t": 61, "v": 32731}}, "1": {"0": {"v": 9}, "1": {"v": 11}, "2": {"h": 1, "v": 16}, "3": {"h": 3, "v": 44}, "4": {"h": 10, "v": 149}, "5": {"h": 64, "t": 1, "v": 418}, "6": {"h": 178, "v": 1072}, "7": {"h": 678, "t": 1, "v": 2219}, "8": {"h": 1993, "t": 8, "v": 4316}, "9": {"h": 5487, "t": 12, "v": 7753}, "10": {"h": 30968, "t": 42, "v": 27136}, "11": {"h": 9619, "t": 12, "v": 5336}, "12": {"h": 5671, "t": 3, "v": 2005}, "13": {"h": 3027, "t": 4, "v": 674}, "14": {"h": 1518, "t": 2, "v": 182}, "15": {"h": 595, "v": 65}, "16": {"h": 223, "v": 14}, "17": {"h": 97, "v": 3}, "18": {"h": 31}, "19": {"h": 17, "v": 1}, "20": {"h": 20}}, "2": {"0": {"v": 47}, "1": {"h": 2, "v": 73}, "2": {"h": 10, "v": 135}, "3": {"h": 18, "v": 300}, "4": {"h": 52, "v": 622}, "5": {"h": 206, "t": 1, "v": 1006}, "6": {"h": 448, "v": 2070}, "7": {"h": 1359, "t": 1, "v": 3880}, "8": {"h": 3592, "t": 16, "v": 6778}, "9": {"h": 9043, "t": 17, "v": 11054}, "10": {"h": 26985, "t": 32, "v": 19510}, "11": {"h": 8806, "t": 11, "v": 3928}, "12": {"h": 4971, "t": 3, "v": 1402}, "13": {"h": 2612, "t": 3, "v": 469}, "14": {"h": 1280, "t": 1, "v": 102}, "15": {"h": 502, "v": 41}, "16": {"h": 176, "v": 4}, "17": {"h": 76, "v": 1}, "18": {"h": 31}, "19": {"h": 16, "v": 1}, "20": {"h": 15}}, "3": {"0": {"v": 35}, "1": {"h": 1, "v": 63}, "2": {"h": 5, "v": 111}, "3": {"h": 7, "v": 229}, "4": {"h": 34, "v": 535}, "5": {"h": 130, "v": 857}, "6": {"h": 262, "v": 1824}, "7": {"h": 941, "t": 1, "v": 3376}, "8": {"h": 2549, "t": 12, "v": 6095}, "9": {"h": 6666, "t": 17, "v": 10197}, "10": {"h": 20352, "t": 24, "v": 17936}, "11": {"h": 12132, "t": 20, "v": 6356}, "12": {"h": 7545, "t": 5, "v": 2436}, "13": {"h": 4400, "t": 5, "v": 914}, "14": {"h": 2438, "t": 1, "v": 289}, "15": {"h": 1331, "v": 116}, "16": {"h": 716, "v": 34}, "17": {"h": 362, "v": 13}, "18": {"h": 179, "v": 5}, "19": {"h": 76, "v": 2}, "20": {"h": 74}}, "4": {"0": {"h": 4, "v": 131}, "1": {"h": 5, "v": 139}, "2": {"h": 6, "v": 306}, "3": {"h": 28, "v": 574}, "4": {"h": 93, "v": 1130}, "5": {"h": 291, "v": 1963}, "6": {"h": 678, "t": 1, "v": 3443}, "7": {"h": 1749, "t": 2, "v": 5283}, "8": {"h": 3896, "t": 13, "v": 7631}, "9": {"h": 8505, "t": 24, "v": 10142}, "10": {"h": 18730, "t": 20, "v": 13470}, "11": {"h": 11088, "t": 17, "v": 4630}, "12": {"h": 6788, "t": 5, "v": 1692}, "13": {"h": 3892, "t": 2, "v": 621}, "14": {"h": 2127, "t": 1, "v": 167}, "15": {"h": 1137, "v": 77}, "16": {"h": 606, "v": 15}, "17": {"h": 301, "v": 6}, "18": {"h": 146, "v": 3}, "19": {"h": 69}, "20": {"h": 61}}, "5": {"0": {"h": 2, "v": 119}, "1": {"h": 2, "v": 113}, "2": {"h": 4, "v": 249}, "3": {"h": 16, "v": 482}, "4": {"h": 52, "v": 967}, "5": {"h": 168, "v": 1672}, "6": {"h": 410, "t": 1, "v": 2975}, "7": {"h": 1184, "t": 1, "v": 4741}, "8": {"h": 2712, "t": 9, "v": 7089}, "9": {"h": 6265, "t": 20, "v": 9652}, "10": {"h": 14411, "t": 21, "v": 12982}, "11": {"h": 11308, "t": 18, "v": 5970}, "12": {"h": 8543, "t": 7, "v": 2605}, "13": {"h": 6013, "t": 6, "v": 1149}, "14": {"h": 3992, "t": 1, "v": 407}, "15": {"h": 2379, "t": 1, "v": 169}, "16": {"h": 1304, "v": 55}, "17": {"h": 716, "v": 20}, "18": {"h": 349, "v": 5}, "19": {"h": 182, "v": 1}, "20": {"h": 188, "v": 1}}, "6": {"0": {"h": 3, "v": 313}, "1": {"h": 7, "v": 312}, "2": {"h": 13, "v": 521}, "3": {"h": 33, "v": 927}, "4": {"h": 117, "v": 1524}, "5": {"h": 277, "v": 2565}, "6": {"h": 696, "t": 3, "v": 4185}, "7": {"h": 1805, "t": 6, "v": 6185}, "8": {"h": 3877, "t": 10, "v": 8532}, "9": {"h": 7795, "t": 19, "v": 9679}, "10": {"h": 13892, "t": 22, "v": 9713}, "11": {"h": 10701, "t": 12, "v": 4172}, "12": {"h": 7828, "t": 9, "v": 1724}, "13": {"h": 5457, "t": 3, "v": 703}, "14": {"h": 3406, "t": 1, "v": 250}, "15": {"h": 2017, "v": 71}, "16": {"h": 1098, "v": 33}, "17": {"h": 575, "v": 9}, "18": {"h": 297, "v": 3}, "19": {"h": 156, "v": 1}, "20": {"h": 150, "v": 1}}, "7": {"0": {"h": 1, "v": 249}, "1": {"h": 3, "v": 255}, "2": {"h": 9, "v": 436}, "3": {"h": 23, "v": 774}, "4": {"h": 54, "v": 1310}, "5": {"h": 152, "v": 2216}, "6": {"h": 378, "t": 2, "v": 3626}, "7": {"h": 1113, "t": 4, "v": 5635}, "8": {"h": 2665, "t": 6, "v": 7967}, "9": {"h": 5566, "t": 20, "v": 9502}, "10": {"h": 10946, "t": 20, "v": 9950}, "11": {"h": 11089, "t": 19, "v": 5246}, "12": {"h": 9302, "t": 7, "v": 2518}, "13": {"h": 7017, "t": 5, "v": 1081}, "14": {"h": 4602, "t": 1, "v": 419}, "15": {"h": 2898, "v": 151}, "16": {"h": 1806, "t": 1, "v": 59}, "17": {"h": 1115, "v": 19}, "18": {"h": 661, "v": 7}, "19": {"h": 384, "v": 2}, "20": {"h": 416, "v": 1}}, "8": {"0": {"h": 2, "v": 536}, "1": {"h": 4, "v": 421}, "2": {"h": 16, "v": 810}, "3": {"h": 43, "v": 1291}, "4": {"h": 100, "v": 2104}, "5": {"h": 289, "v": 3301}, "6": {"h": 631, "t": 2, "v": 4864}, "7": {"h": 1589, "t": 6, "v": 6496}, "8": {"h": 3442, "t": 10, "v": 8449}, "9": {"h": 6522, "t": 21, "v": 8967}, "10": {"h": 11102, "t": 21, "v": 7723}, "11": {"h": 10955, "t": 17, "v": 3796}, "12": {"h": 8756, "t": 5, "v": 1640}, "13": {"h": 6317, "t": 2, "v": 662}, "14": {"h": 4119, "v": 240}, "15": {"h": 2565, "t": 1, "v": 83}, "16": {"h": 1574, "v": 29}, "17": {"h": 942, "v": 5}, "18": {"h": 564, "v": 4}, "19": {"h": 319, "v": 2}, "20": {"h": 349}}, "9": {"0": {"h": 1, "v": 425}, "1": {"h": 2, "v": 363}, "2": {"h": 6, "v": 665}, "3": {"h": 22, "v": 1071}, "4": {"h": 50, "v": 1805}, "5": {"h": 160, "v": 2939}, "6": {"h": 367, "v": 4357}, "7": {"h": 978, "t": 5, "v": 6113}, "8": {"h": 2309, "t": 8, "v": 8018}, "9": {"h": 4805, "t": 13, "v": 9165}, "10": {"h": 8864, "t": 32, "v": 8202}, "11": {"h": 10372, "t": 17, "v": 4592}, "12": {"h": 9214, "t": 6, "v": 2190}, "13": {"h": 7432, "t": 2, "v": 924}, "14": {"h": 5436, "v": 361}, "15": {"h": 3897, "t": 2, "v": 156}, "16": {"h": 2482, "v": 52}, "17": {"h": 1573, "v": 13}, "18": {"h": 956, "v": 6}, "19": {"h": 553, "v": 5}, "20": {"h": 721, "v": 1}}, "10": {"0": {"h": 1, "v": 870}, "1": {"h": 3, "v": 582}, "2": {"h": 11, "v": 1012}, "3": {"h": 31, "v": 1552}, "4": {"h": 86, "v": 2489}, "5": {"h": 230, "v": 3887}, "6": {"h": 545, "t": 1, "v": 5415}, "7": {"h": 1351, "t": 5, "v": 7175}, "8": {"h": 3088, "t": 8, "v": 8477}, "9": {"h": 5804, "t": 18, "v": 8517}, "10": {"h": 9423, "t": 30, "v": 6347}, "11": {"h": 10364, "t": 11, "v": 3045}, "12": {"h": 8810, "t": 3, "v": 1271}, "13": {"h": 6875, "t": 1, "v": 488}, "14": {"h": 4880, "t": 1, "v": 179}, "15": {"h": 3326, "v": 84}, "16": {"h": 2136, "v": 12}, "17": {"h": 1318, "v": 6}, "18": {"h": 797, "v": 2}, "19": {"h": 481, "v": 1}, "20": {"h": 597, "v": 1}}, "11": {"0": {"h": 1, "v": 704}, "1": {"v": 483}, "2": {"h": 3, "v": 859}, "3": {"h": 13, "v": 1301}, "4": {"h": 32, "v": 2146}, "5": {"h": 101, "v": 3386}, "6": {"h": 250, "v": 4893}, "7": {"h": 712, "v": 6702}, "8": {"h": 1862, "t": 9, "v": 8267}, "9": {"h": 3934, "t": 12, "v": 9002}, "10": {"h": 7651, "t": 37, "v": 7086}, "11": {"h": 9890, "t": 13, "v": 3742}, "12": {"h": 9485, "t": 1, "v": 1703}, "13": {"h": 8030, "t": 4, "v": 708}, "14": {"h": 5908, "t": 2, "v": 261}, "15": {"h": 4331, "v": 122}, "16": {"h": 2954, "v": 30}, "17": {"h": 1855, "v": 10}, "18": {"h": 1242, "v": 4}, "19": {"h": 750, "v": 1}, "20": {"h": 1153, "v": 2}}, "12": {"0": {"h": 1, "v": 1167}, "1": {"h": 1, "v": 718}, "2": {"h": 4, "v": 1265}, "3": {"h": 22, "v": 1909}, "4": {"h": 46, "v": 2915}, "5": {"h": 161, "t": 1, "v": 4237}, "6": {"h": 367, "v": 5731}, "7": {"h": 970, "t": 1, "v": 7348}, "8": {"h": 2329, "t": 12, "v": 8534}, "9": {"h": 4704, "t": 12, "v": 8406}, "10": {"h": 8490, "t": 31, "v": 5476}, "11": {"h": 10326, "t": 6, "v": 2260}, "12": {"h": 9261, "t": 1, "v": 891}, "13": {"h": 7333, "t": 3, "v": 321}, "14": {"h": 5395, "v": 119}, "15": {"h": 3826, "v": 34}, "16": {"h": 2553, "v": 11}, "17": {"h": 1606, "v": 3}, "18": {"h": 1063, "v": 1}, "19": {"h": 660}, "20": {"h": 975, "v": 1}}, "13": {"0": {"v": 974}, "1": {"h": 1, "v": 607}, "2": {"h": 1, "v": 1096}, "3": {"h": 4, "v": 1690}, "4": {"h": 19, "v": 2483}, "5": {"h": 58, "t": 1, "v": 3722}, "6": {"h": 172, "v": 5199}, "7": {"h": 436, "t": 1, "v": 6983}, "8": {"h": 1258, "t": 8, "v": 8587}, "9": {"h": 2953, "t": 9, "v": 9050}, "10": {"h": 6898, "t": 38, "v": 6323}, "11": {"h": 9745, "t": 6, "v": 2825}, "12": {"h": 9531, "v": 1126}, "13": {"h": 8074, "t": 4, "v": 440}, "14": {"h": 6343, "v": 164}, "15": {"h": 4854, "v": 56}, "16": {"h": 3404, "v": 16}, "17": {"h": 2248, "v": 2}, "18": {"h": 1523, "v": 2}, "19": {"h": 995, "v": 1}, "20": {"h": 1576, "v": 1}}, "14": {"0": {"v": 1552}, "1": {"h": 1, "v": 898}, "2": {"h": 3, "v": 1422}, "3": {"h": 11, "v": 2207}, "4": {"h": 25, "v": 3177}, "5": {"h": 79, "t": 1, "v": 4496}, "6": {"h": 252, "t": 1, "v": 6084}, "7": {"h": 613, "t": 4, "v": 7756}, "8": {"h": 1551, "t": 7, "v": 8779}, "9": {"h": 3542, "t": 9, "v": 8465}, "10": {"h": 7849, "t": 27, "v": 4569}, "11": {"h": 10428, "t": 3, "v": 1275}, "12": {"h": 9407, "t": 1, "v": 439}, "13": {"h": 7608, "t": 1, "v": 110}, "14": {"h": 5862, "v": 43}, "15": {"h": 4344, "v": 12}, "16": {"h": 2989, "v": 1}, "17": {"h": 1949}, "18": {"h": 1318, "v": 1}, "19": {"h": 868}, "20": {"h": 1336}}, "15": {"0": {"v": 1290}, "1": {"v": 800}, "2": {"v": 1217}, "3": {"h": 2, "v": 1899}, "4": {"h": 5, "v": 2795}, "5": {"h": 24, "v": 4003}, "6": {"h": 66, "t": 1, "v": 5594}, "7": {"h": 203, "v": 7363}, "8": {"h": 627, "t": 7, "v": 8844}, "9": {"h": 1691, "t": 4, "v": 9518}, "10": {"h": 6017, "t": 34, "v": 5579}, "11": {"h": 10045, "t": 6, "v": 1544}, "12": {"h": 9820, "v": 586}, "13": {"h": 8358, "t": 2, "v": 168}, "14": {"h": 6761, "v": 66}, "15": {"h": 5171, "v": 15}, "16": {"h": 3707, "v": 4}, "17": {"h": 2472}, "18": {"h": 1794, "v": 1}, "19": {"h": 1238}, "20": {"h": 2034}}, "16": {"0": {"v": 1888}, "1": {"v": 1094}, "2": {"v": 1635}, "3": {"h": 5, "v": 2476}, "4": {"h": 11, "v": 3403}, "5": {"h": 37, "v": 4755}, "6": {"h": 82, "t": 1, "v": 6352}, "7": {"h": 268, "t": 2, "v": 7775}, "8": {"h": 773, "t": 7, "v": 9049}, "9": {"h": 2042, "t": 5, "v": 9011}, "10": {"h": 7208, "t": 31, "v": 3801}, "11": {"h": 11015}, "12": {"h": 9801}, "13": {"h": 7923}, "14": {"h": 6256}, "15": {"h": 4627}, "16": {"h": 3299}, "17": {"h": 2203}, "18": {"h": 1634}, "19": {"h": 1076}, "20": {"h": 1734}}, "17": {"0": {"v": 1636}, "1": {"v": 913}, "2": {"v": 1431}, "3": {"v": 2170}, "4": {"v": 3024}, "5": {"v": 4217}, "6": {"v": 5894}, "7": {"v": 7482}, "8": {"v": 9099}, "9": {"v": 10464}, "10": {"h": 5367, "t": 46, "v": 4909}, "11": {"h": 15592}, "12": {"h": 10102}, "13": {"h": 8052}, "14": {"h": 6308}, "15": {"h": 4627}, "16": {"h": 3299}, "17": {"h": 2203}, "18": {"h": 1634}, "19": {"h": 1076}, "20": {"h": 1734}}, "18": {"0": {"v": 1}, "1": {"v": 2}, "2": {"v": 4}, "3": {"v": 10}, "4": {"v": 28}, "5": {"h": 1, "v": 59}, "6": {"h": 3, "v": 134}, "7": {"h": 13, "v": 296}, "8": {"h": 43, "v": 577}, "9": {"h": 290, "t": 3, "v": 1149}, "10": {"h": 5017, "t": 27, "v": 2649}}, "19": {"0": {"v": 1}, "1": {"v": 1}, "2": {"v": 4}, "3": {"v": 6}, "4": {"v": 25}, "5": {"v": 47}, "6": {"v": 103}, "7": {"v": 255}, "8": {"v": 534}, "9": {"v": 1184}, "10": {"h": 2980, "t": 30, "v": 2749}, "11": {"h": 2164}, "12": {"h": 131}, "13": {"h": 56}, "14": {"h": 36}}, "20": {"1": {"v": 1}, "2": {"v": 3}, "3": {"v": 6}, "4": {"v": 24}, "5": {"h": 1, "v": 35}, "6": {"h": 1, "v": 75}, "7": {"h": 8, "v": 149}, "8": {"h": 26, "v": 360}, "9": {"h": 133, "t": 2, "v": 639}, "10": {"h": 2811, "t": 19, "v": 1457}}, "21": {"2": {"v": 1}, "3": {"v": 8}, "4": {"v": 17}, "5": {"v": 33}, "6": {"v": 53}, "7": {"v": 134}, "8": {"v": 300}, "9": {"v": 683}, "10": {"h": 1654, "t": 21, "v": 1520}, "11": {"h": 1197}, "12": {"h": 81}, "13": {"h": 34}, "14": {"h": 14}}, "22": {"2": {"v": 2}, "3": {"v": 2}, "4": {"v": 12}, "5": {"v": 17}, "6": {"h": 1, "v": 34}, "7": {"h": 2, "t": 1, "v": 99}, "8": {"h": 20, "t": 1, "v": 188}, "9": {"h": 87, "t": 1, "v": 355}, "10": {"h": 1544, "t": 10, "v": 811}}, "23": {"2": {"v": 1}, "3": {"v": 2}, "4": {"v": 9}, "5": {"v": 16}, "6": {"v": 29}, "7": {"v": 78}, "8": {"v": 163}, "9": {"v": 380}, "10": {"h": 924, "t": 13, "v": 842}, "11": {"h": 657}, "12": {"h": 44}, "13": {"h": 25}, "14": {"h": 4}}, "24": {"1": {"v": 1}, "2": {"v": 1}, "3": {"v": 1}, "4": {"v": 7}, "5": {"v": 14}, "6": {"h": 1, "v": 21}, "7": {"h": 2, "v": 47}, "8": {"h": 14, "v": 106}, "9": {"h": 58, "t": 1, "v": 189}, "10": {"h": 849, "t": 11, "v": 455}}, "25": {"1": {"v": 1}, "2": {"v": 1}, "3": {"v": 1}, "4": {"v": 5}, "5": {"v": 15}, "6": {"v": 19}, "7": {"v": 41}, "8": {"v": 85}, "9": {"v": 200}, "10": {"h": 519, "t": 12, "v": 474}, "11": {"h": 361}, "12": {"h": 26}, "13": {"h": 13}, "14": {"h": 5}}, "26": {"3": {"v": 3}, "4": {"v": 3}, "5": {"v": 10}, "6": {"v": 15}, "7": {"h": 3, "v": 26}, "8": {"h": 8, "v": 53}, "9": {"h": 22, "v": 122}, "10": {"h": 486, "t": 10, "v": 242}}, "27": {"3": {"v": 2}, "4": {"v": 3}, "5": {"v": 9}, "6": {"v": 14}, "7": {"v": 21}, "8": {"v": 53}, "9": {"v": 111}, "10": {"h": 271, "t": 10, "v": 261}, "11": {"h": 227}, "12": {"h": 13}, "13": {"h": 5}, "14": {"h": 3}}, "28": {"0": {"v": 1}, "4": {"v": 1}, "5": {"v": 4}, "6": {"v": 4}, "7": {"h": 2, "t": 1, "v": 16}, "8": {"h": 3, "v": 36}, "9": {"h": 9, "v": 58}, "10": {"h": 257, "t": 5, "v": 141}}, "29": {"0": {"v": 1}, "5": {"v": 5}, "6": {"v": 3}, "7": {"v": 14}, "8": {"v": 29}, "9": {"v": 64}, "10": {"h": 150, "t": 6, "v": 145}, "11": {"h": 110}, "12": {"h": 8}, "13": {"h": 3}}, "30": {"5": {"v": 5}, "6": {"v": 3}, "7": {"v": 7}, "8": {"h": 1, "v": 18}, "9": {"h": 7, "v": 30}, "10": {"h": 142, "t": 4, "v": 82}}, "31": {"5": {"v": 5}, "6": {"v": 2}, "7": {"v": 4}, "8": {"v": 20}, "9": {"v": 30}, "10": {"h": 81, "t": 4, "v": 84}, "11": {"h": 65}, "12": {"h": 2}, "13": {"h": 2}}, "32": {"5": {"v": 1}, "6": {"v": 2}, "7": {"v": 7}, "8": {"v": 11}, "9": {"h": 2, "v": 16}, "10": {"h": 79, "t": 4, "v": 47}}, "33": {"6": {"v": 2}, "7": {"v": 4}, "8": {"v": 12}, "9": {"v": 17}, "10": {"h": 48, "t": 4, "v": 49}, "11": {"h": 31}, "12": {"h": 2}}, "34": {"5": {"v": 1}, "6": {"v": 1}, "7": {"v": 2}, "8": {"v": 6}, "9": {"h": 1, "v": 13}, "10": {"h": 47, "t": 2, "v": 26}}, "35": {"5": {"v": 1}, "6": {"v": 1}, "7": {"v": 1}, "8": {"v": 6}, "9": {"v": 12}, "10": {"h": 23, "t": 2, "v": 28}, "11": {"h": 23}, "12": {"h": 1}, "13": {"h": 1}}, "36": {"5": {"v": 1}, "6": {"v": 2}, "7": {"v": 2}, "8": {"v": 2}, "9": {"v": 4}, "10": {"h": 23, "t": 1, "v": 17}}, "37": {"6": {"v": 2}, "7": {"v": 3}, "8": {"v": 2}, "9": {"v": 2}, "10": {"h": 12, "t": 1, "v": 19}, "11": {"h": 8}, "12": {"h": 3}}, "38": {"8": {"v": 2}, "9": {"h": 1, "v": 4}, "10": {"h": 11, "v": 11}, "7": {"v": 2}}, "39": {"8": {"v": 4}, "9": {"v": 4}, "10": {"h": 6, "v": 11}, "11": {"h": 6}}, "40": {"8": {"v": 1}, "9": {"h": 1, "v": 3}, "10": {"h": 4, "v": 6}, "7": {"h": 1, "v": 1}}, "41": {"8": {"v": 1}, "9": {"v": 3}, "10": {"h": 5, "v": 6}, "13": {"h": 1}, "7": {"v": 1}}, "42": {"8": {"v": 1}, "9": {"v": 3}, "10": {"h": 5, "v": 2}}, "43": {"8": {"v": 1}, "9": {"v": 3}, "10": {"h": 2, "v": 2}, "11": {"h": 3}}, "44": {"8": {"v": 1}, "10": {"h": 2, "v": 1}}, "45": {"8": {"v": 1}, "10": {"h": 2, "v": 1}}, "46": {"10": {"h": 2, "v": 1}}, "47": {"10": {"h": 1, "v": 1}, "11": {"h": 1}}, "48": {"9": {"v": 1}, "10": {"h": 1}}, "49": {"9": {"v": 1}, "11": {"h": 1}}}');

function inningToText(n) {
    var suffix = '';
    var digit = n % 10;
    switch(digit) {
        case 1:
            suffix = 'st';
            break;
        case 2:
            suffix = 'nd';
            break;
        case 3:
            suffix = 'rd';
            break;
        default:
            suffix = 'th';
            break;
    }
    return n + suffix;
}

function processRow(r) {
    var h = r['h'] ? r['h'] : 0;
    var v = r['v'] ? r['v'] : 0;
    var t = r['t'] ? r['t'] : 0;
    var total = h + v + t;
    var hp = (h / total * 100).toFixed(2) + '%';
    var vp = (v / total * 100).toFixed(2) + '%';
    var tp = (t / total * 100).toFixed(2) + '%';
    return [hp, vp, tp, total];
}

var InningSelector = React.createClass({
    changeHandler: function() {
        var tb = parseInt(this.refs.tbSelect.getDOMNode().value);
        var inn = parseInt(this.refs.inningSelect.getDOMNode().value);
        this.props.changeHandler(tb, inn);
    },
    render: function() {
        var is_bottom = this.props.inning % 2 == 1 ? 1 : 0;
        tb_options = [
            <option key="tb_top" value="0">Top</option>,
            <option key="tb_bottom" value="1">Bottom</option>,
        ];
        inning_options = [];
        for (var x = 1; x < 26; x ++) {
            inning_options.push(
                <option key={'inning_' + (x-1)} value={x-1}>
                    {inningToText(x)}
                </option>
            );
        }
        return(
            <div>
                <select
                    ref='tbSelect'
                    id='top_bottom_selector'
                    onChange={this.changeHandler}
                    value={is_bottom}>
                {tb_options}
                </select>
                <select
                    ref='inningSelect'
                    id='inning_selector'
                    onChange={this.changeHandler}
                    value={Math.floor(this.props.inning / 2)}>
                {inning_options}
                </select>
            </div>
        )
    }
});

var MenuComponent = React.createClass({
    homeChangeHandler: function(event) {
         this.props.updateHomeScore(event.target.value);
    },
    awayChangeHandler: function(event) {
        this.props.updateAwayScore(event.target.value);
    },
    inningChangeHandler: function(tb, inn) {
        var i = inn * 2 + tb;
        this.props.updateInning(i);
    },
    render: function() {
        return(
            <table>
            <tr>
                <td width="50%"><strong>Inning:</strong></td>
                <td>
                    <InningSelector
                        inning={this.props.inning}
                        changeHandler={this.inningChangeHandler} />
                </td>
            </tr>
            <tr>
                <td><strong>Away:</strong></td>
                <td><input type="text" onChange={this.awayChangeHandler} value={this.props.away} /></td>
            </tr>
            <tr>
                <td><strong>Home:</strong></td>
                <td><input type="text" onChange={this.homeChangeHandler} value={this.props.home} /></td>
            </tr>
            </table>);
    }
});

var ResultsDisplay = React.createClass({

    render: function() {
        var message = '';
        if (this.props.data === -1) {
            return (<p>This particular situation has not occured in an MLB game since 1960.</p>);
        } else {
            var p = processRow(this.props.data);
            var winner = ''
            var winner_pct = ''
            var total = p[3];
            message = 'Historically, the ';
            if (this.props.data['h'] > this.props.data['v']) {
                winner = 'home team';
                winner_pct = p[0];
            } else {
                winner = 'away team';
                winner_pct = p[1];
            }
            return (
                <p>Historically, the <strong>{winner}</strong> has a <strong>{winner_pct}</strong> chance of winning this game.<br />
                <small>{total} total samples.</small></p>
            );
        }

    }
});

var OtherSplitsDisplay = React.createClass({
    render: function() {
        var inning = Math.floor(this.props.inning / 2) + 1;
        var top_bottom = 'Top';
        if (this.props.inning % 2 == 1) {
            top_bottom = 'Bottom';
        }
        var bb = this.props.differential - 2;
        var tb = this.props.differential + 2;
        var tdiff = 0;
        var bdiff = 0;
        if (tb > 20) {
            tdiff = tb - 20;
            tb = 20;
        } else if (bb < 0) {
            bdiff = bb * -1;
            bb = 0;
        }
        bb -= tdiff;
        tb += bdiff;

        rows = [];
        var p;
        for (var x = bb; x <= tb; x++) {
            var r = this.props.data[x];
            if (typeof r !== 'undefined') {
                p = processRow(r);
                rows.push(
                    <tr key={'other_row_' + x}>
                        <td>{x-10}</td>
                        <td>{p[0]}</td>
                        <td>{p[1]}</td>
                        <td>{p[2]}</td>
                    </tr>
                );
            }
        }

        return (
            <div>
                <h4>Other splits for the {top_bottom} of the {inningToText(inning)}</h4>

                <p><small>Score differntial is from the home team's perspective.</small></p>
                <table>
                    <tr>
                        <th>Differential</th>
                        <th>Home Win Pct</th>
                        <th>Away Win Pct</th>
                        <th>Tie Pct</th>
                    </tr>
                    <tbody>
                    {rows}
                    </tbody>
                </table>
            </div>
        );
    }
})

var WinningPercentageComponent = React.createClass({
    updateInning: function(i) {
        this.setState({inningNum: i});
    },
    calculateScoreDiff: function(h, v) {
        var sd = (h - v + 10);
        sd = sd > 20 ? 20 : sd;
        sd = sd < 0 ? 0 : sd;
        return sd;
    },
    updateHomeScore: function(h) {
        var hs = parseInt(h);
        hs = hs ? hs : 0;
        var sd = this.calculateScoreDiff(hs, this.state.visitorScore);
        this.setState({homeScore: hs, scoreDiff: sd});
    },
    updateVisitorScore: function(v) {
        var vs = parseInt(v);
        vs = vs ? vs : 0;
        var sd = this.calculateScoreDiff(this.state.homeScore, v);
        this.setState({visitorScore: vs, scoreDiff: sd});
    },
    getInitialState: function() {
        return ({
            inningNum: 0,
            scoreDiff: 10,
            homeScore: 0,
            visitorScore: 0,
        });
    },
    render: function() {
        var i = this.state.inningNum.toString();
        var d = this.state.scoreDiff.toString();
        var split = data[i][d];
        if (typeof split === 'undefined') {
            split = -1;
        }
        return (
            <div>
                <MenuComponent
                    inning={this.state.inningNum}
                    home={this.state.homeScore}
                    away={this.state.visitorScore}
                    updateInning={this.updateInning}
                    updateHomeScore={this.updateHomeScore}
                    updateAwayScore={this.updateVisitorScore} />
                <ResultsDisplay data={split} />
                <OtherSplitsDisplay
                    inning={this.state.inningNum}
                    differential={this.state.scoreDiff}
                    data={data[i]} />
            </div>
        )
    }
});

React.renderComponent(
    <WinningPercentageComponent />,
    $('#winning_percentage_component').get(0));
